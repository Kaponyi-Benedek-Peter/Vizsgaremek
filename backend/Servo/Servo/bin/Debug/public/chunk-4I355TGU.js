import{a as A}from"./chunk-MTEQBRXI.js";import{b as R}from"./chunk-X6PFKWKM.js";import{e as D,g as I,k as T,n as B,p as j}from"./chunk-Y5C4H5IK.js";import{$ as x,$a as v,Ba as n,Ja as M,Kb as c,Lb as d,Oa as C,S as m,Z as P,_ as b,aa as _,ab as u,ac as k,ec as y,ja as g,jb as e,kb as r,lb as f,mb as S,pb as w,qb as E,xb as s,yb as l,zb as O}from"./chunk-766VLGYE.js";function V(o,a){o&1&&(e(0,"div",2),f(1,"div",3),e(2,"h1"),s(3),c(4,"translate"),r(),e(5,"p",4),s(6),c(7,"translate"),r()()),o&2&&(n(3),l(d(4,2,"profile.delacc.processing")),n(3),l(d(7,4,"profile.delacc.please_wait")))}function z(o,a){o&1&&(e(0,"div",2)(1,"div",5),x(),e(2,"svg",6),f(3,"path",7),r()(),_(),e(4,"h1"),s(5),c(6,"translate"),r(),e(7,"p",4),s(8),c(9,"translate"),r(),e(10,"p",8),s(11),c(12,"translate"),r()()),o&2&&(n(5),l(d(6,3,"profile.delacc.success_title")),n(3),l(d(9,5,"profile.delacc.success_message")),n(3),l(d(12,7,"profile.delacc.redirecting")))}function H(o,a){if(o&1){let t=S();e(0,"div",2)(1,"div",9),x(),e(2,"svg",6),f(3,"path",10),r()(),_(),e(4,"h1"),s(5),c(6,"translate"),r(),e(7,"p",11),s(8),c(9,"translate"),r(),e(10,"button",12),w("click",function(){P(t);let p=E();return b(p.goHome())}),s(11),c(12,"translate"),r()()}if(o&2){let t=E();n(5),l(d(6,3,"profile.delacc.error_title")),n(3),l(d(9,5,t.errorMessage())),n(3),O(" ",d(12,7,"common.go_home")," ")}}var L=class o{constructor(a,t){this.route=a;this.router=t}location=m(k);accountService=m(A);authService=m(R);isProcessing=g(!1);isSuccess=g(!1);errorMessage=g("");ngOnInit(){this.route.queryParams.subscribe(a=>{let t=a.accdel;if(!t){this.errorMessage.set("auth.errors.invalid_link");return}let i=t.split(";");if(i.length!==2){this.errorMessage.set("auth.errors.invalid_link");return}let p=i[0].trim(),h=i[1].trim();if(!p||!h){this.errorMessage.set("auth.errors.invalid_link");return}let N=`/delacc-promise?accdel=${p};${h}`;this.location.replaceState(N),this.confirmDeletion(p,h)})}confirmDeletion(a,t){this.isProcessing.set(!0),this.errorMessage.set(""),this.accountService.confirmAccountDeletion(a,t).subscribe({next:()=>{this.isProcessing.set(!1),this.isSuccess.set(!0),setTimeout(()=>{this.router.navigate(["/home"])},3e3)},error:i=>{this.isProcessing.set(!1),this.errorMessage.set(i.message||"profile.errors.delete_failed")}})}goHome(){this.router.navigate(["/home"])}static \u0275fac=function(t){return new(t||o)(M(D),M(I))};static \u0275cmp=C({type:o,selectors:[["app-delacc-promise"]],decls:5,vars:3,consts:[[1,"auth-container"],[1,"auth-card"],[1,"verification-content"],[1,"spinner-large"],[1,"verification-text"],[1,"icon-wrapper","success"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["stroke-linecap","round","stroke-linejoin","round","d","M5 13l4 4L19 7"],[1,"redirect-notice"],[1,"icon-wrapper","error"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"verification-text","error-text"],[1,"submit-btn",3,"click"]],template:function(t,i){t&1&&(e(0,"div",0)(1,"div",1),v(2,V,8,6,"div",2),v(3,z,13,9,"div",2),v(4,H,13,9,"div",2),r()()),t&2&&(n(2),u(i.isProcessing()?2:-1),n(),u(!i.isProcessing()&&i.isSuccess()?3:-1),n(),u(!i.isProcessing()&&i.errorMessage()?4:-1))},dependencies:[y,T,j,B],styles:[".auth-container[_ngcontent-%COMP%]{min-height:calc(100vh - 140px);display:flex;align-items:center;justify-content:center;padding:var(--space-6) var(--space-4);background:var(--bg-secondary)}.auth-card[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:var(--radius-xl);box-shadow:var(--shadow-lg);padding:var(--space-10) var(--space-8);width:100%;max-width:480px;animation:_ngcontent-%COMP%_slideUp .4s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.verification-content[_ngcontent-%COMP%]{text-align:center}.verification-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(1.25rem,3vw,1.6rem);font-weight:700;color:var(--text-primary);margin:var(--space-5) 0 var(--space-3)}.verification-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:var(--text-base, 1rem);line-height:1.6;margin-bottom:var(--space-4)}.error-text[_ngcontent-%COMP%]{color:#dc2626}.redirect-notice[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);opacity:.7}.icon-wrapper[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;margin:0 auto var(--space-4);display:flex;align-items:center;justify-content:center}.icon-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px}.icon-wrapper.success[_ngcontent-%COMP%]{background:#067a451f;color:#067a45}.icon-wrapper.error[_ngcontent-%COMP%]{background:#dc26261a;color:#dc2626}.spinner-large[_ngcontent-%COMP%]{width:56px;height:56px;border:4px solid var(--border-color);border-top-color:var(--color-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin:0 auto var(--space-5)}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:var(--space-3) var(--space-6);background:linear-gradient(135deg,#067a45,#048a4f);color:#fff;border:none;border-radius:var(--radius-lg);font-size:var(--text-base, 1rem);font-weight:600;cursor:pointer;transition:all var(--transition-fast, .15s);min-height:48px;margin-top:var(--space-2)}.submit-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #067a4566}"]})};export{L as DelaccPromise};
