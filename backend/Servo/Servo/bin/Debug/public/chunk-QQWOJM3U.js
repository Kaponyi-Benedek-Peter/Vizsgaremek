import{a as F,b as R,c as W,d as q,e as A,f as G,g as H,k as Y,l as J}from"./chunk-7KXRH35Y.js";import{b as j}from"./chunk-SF2QL2AW.js";import{g as B,h as D,k as V,n as N,p as T}from"./chunk-MXNZA3P6.js";import{$ as k,$a as _,Ba as t,Bb as C,Cb as M,Db as w,Ja as y,Kb as o,Lb as r,Oa as L,Z as x,_ as f,_a as E,aa as S,ab as b,ec as z,fb as h,gb as n,hb as i,ib as P,ja as m,mb as I,ob as O,qb as u,xb as a,yb as p,zb as c}from"./chunk-766VLGYE.js";function Q(s,d){s&1&&(n(0,"div",2)(1,"div",3),k(),n(2,"svg",4),P(3,"path",5),i()(),S(),n(4,"h1"),a(5),o(6,"translate"),i(),n(7,"p",6),a(8),o(9,"translate"),i(),n(10,"div",7)(11,"div",8)(12,"span",9),a(13,"1"),i(),n(14,"p"),a(15),o(16,"translate"),i()(),n(17,"div",8)(18,"span",9),a(19,"2"),i(),n(20,"p"),a(21),o(22,"translate"),i()()()()),s&2&&(t(5),p(r(6,4,"auth.login.email_sent_title")),t(3),p(r(9,6,"auth.login.email_sent_message")),t(7),p(r(16,8,"auth.login.step_1")),t(6),p(r(22,10,"auth.login.step_2")))}function U(s,d){if(s&1&&(n(0,"div",23),a(1),o(2,"translate"),i()),s&2){let e=u(2);t(),c(" ",r(2,1,e.errorMessage())," ")}}function X(s,d){s&1&&(P(0,"span",30),a(1),o(2,"translate")),s&2&&(t(),c(" ",r(2,1,"auth.login.logging_in")," "))}function Z(s,d){s&1&&(a(0),o(1,"translate")),s&2&&c(" ",r(1,1,"auth.login.button")," ")}function $(s,d){if(s&1){let e=I();n(0,"div",10)(1,"h1"),a(2),o(3,"translate"),i(),n(4,"p",11),a(5),o(6,"translate"),i()(),n(7,"form",12),O("ngSubmit",function(){x(e);let l=u();return f(l.onSubmit())}),n(8,"div",13)(9,"label",14),a(10),o(11,"translate"),i(),n(12,"input",15),o(13,"translate"),w("ngModelChange",function(l){x(e);let g=u();return M(g.email,l)||(g.email=l),f(l)}),i()(),n(14,"div",13)(15,"label",16),a(16),o(17,"translate"),i(),n(18,"div",17)(19,"input",18),o(20,"translate"),w("ngModelChange",function(l){x(e);let g=u();return M(g.password,l)||(g.password=l),f(l)}),i(),n(21,"button",19),o(22,"translate"),O("click",function(){x(e);let l=u();return f(l.togglePasswordVisibility())}),a(23),i()()(),n(24,"div",20)(25,"label",21)(26,"input",22),w("ngModelChange",function(l){x(e);let g=u();return M(g.stayLoggedIn,l)||(g.stayLoggedIn=l),f(l)}),i(),n(27,"span"),a(28),o(29,"translate"),i()()(),_(30,U,3,3,"div",23),n(31,"button",24),_(32,X,3,3)(33,Z,2,3),i(),n(34,"div",25)(35,"a",26),a(36),o(37,"translate"),i()(),n(38,"div",27)(39,"span"),a(40),o(41,"translate"),i()(),n(42,"div",28)(43,"p"),a(44),o(45,"translate"),n(46,"a",29),a(47),o(48,"translate"),i()()()()}if(s&2){let e=u();t(2),p(r(3,23,"auth.login.title")),t(3),p(r(6,25,"auth.login.subtitle")),t(5),c(" ",r(11,27,"auth.fields.email")," "),t(2),h("placeholder",r(13,29,"auth.placeholders.email")),C("ngModel",e.email),h("disabled",e.isLoading()),t(4),c(" ",r(17,31,"auth.fields.password")," "),t(3),h("type",e.showPassword()?"text":"password")("placeholder",r(20,33,"auth.placeholders.password")),C("ngModel",e.password),h("disabled",e.isLoading()),t(2),E("aria-label",r(22,35,"auth.show_password")),t(2),c(" ",e.showPassword()?"\u{1F441}\uFE0F":"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F"," "),t(3),C("ngModel",e.stayLoggedIn),h("disabled",e.isLoading()),t(2),p(r(29,37,"auth.login.stay_logged_in")),t(2),b(e.errorMessage()?30:-1),t(),h("disabled",e.isLoading()),t(),b(e.isLoading()?32:33),t(4),c(" ",r(37,39,"auth.login.forgot_password")," "),t(4),p(r(41,41,"auth.or")),t(4),c(" ",r(45,43,"auth.login.no_account")," "),t(3),c(" ",r(48,45,"auth.login.sign_up")," ")}}var K=class s{constructor(d,e){this.authService=d;this.router=e}email=m("");password=m("");stayLoggedIn=m(!1);isLoading=m(!1);errorMessage=m("");showPassword=m(!1);isEmailSent=m(!1);onSubmit(){if(this.errorMessage.set(""),!this.email()||!this.password()){this.errorMessage.set("auth.errors.empty_fields");return}if(!this.isValidEmail(this.email())){this.errorMessage.set("auth.errors.invalid_email");return}this.isLoading.set(!0),this.authService.loginRequest(this.email(),this.password()).subscribe({next:()=>{this.isLoading.set(!1),this.isEmailSent.set(!0),sessionStorage.setItem("login_stay",this.stayLoggedIn()?"1":"0")},error:d=>{this.isLoading.set(!1),this.errorMessage.set(d.message||"auth.errors.login_failed")}})}togglePasswordVisibility(){this.showPassword.set(!this.showPassword())}isValidEmail(d){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)}static \u0275fac=function(e){return new(e||s)(y(j),y(B))};static \u0275cmp=L({type:s,selectors:[["app-login"]],decls:4,vars:2,consts:[[1,"auth-container"],[1,"auth-card"],[1,"verification-content"],[1,"icon-wrapper"],["viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"mail-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"verification-text"],[1,"verification-steps"],[1,"step"],[1,"step-number"],[1,"auth-header"],[1,"auth-subtitle"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","autocomplete","email",1,"form-input",3,"ngModelChange","placeholder","ngModel","disabled"],["for","password",1,"form-label"],[1,"password-input-wrapper"],["id","password","name","password","required","","autocomplete","current-password",1,"form-input",3,"ngModelChange","type","placeholder","ngModel","disabled"],["type","button",1,"password-toggle",3,"click"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","stayLoggedIn",3,"ngModelChange","ngModel","disabled"],[1,"error-message"],["type","submit",1,"submit-btn",3,"disabled"],[1,"auth-links"],["routerLink","/password-reset-request",1,"link"],[1,"auth-divider"],[1,"auth-footer"],["routerLink","/register",1,"link-primary"],[1,"spinner"]],template:function(e,v){e&1&&(n(0,"div",0)(1,"div",1),_(2,Q,23,12,"div",2),_(3,$,49,47),i()()),e&2&&(t(2),b(v.isEmailSent()?2:-1),t(),b(v.isEmailSent()?-1:3))},dependencies:[z,J,H,R,F,W,q,Y,G,A,V,D,T,N],styles:['.auth-container[_ngcontent-%COMP%]{min-height:calc(100vh - 255px);display:flex;align-items:center;justify-content:center;padding:var(--space-8) var(--space-4);background-color:var(--bg-secondary)}.auth-card[_ngcontent-%COMP%]{background-color:var(--bg-primary);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);padding:var(--space-10);width:100%;max-width:440px;transition:all var(--transition-normal)}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--space-8)}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--text-3xl);font-weight:var(--font-bold);color:var(--text-primary);margin-bottom:var(--space-2)}.auth-subtitle[_ngcontent-%COMP%]{font-size:var(--text-base);color:var(--text-secondary);margin:0}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-5)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-2)}.form-label[_ngcontent-%COMP%]{font-size:var(--text-sm);font-weight:var(--font-medium);color:var(--text-primary)}.form-input[_ngcontent-%COMP%]{width:100%;padding:var(--space-3) var(--space-4);font-size:1rem;font-family:var(--font-primary);color:var(--input-text);background-color:var(--input-bg);border:2px solid var(--input-border);border-radius:var(--radius-md);transition:all var(--transition-fast);outline:none;min-height:48px;box-sizing:border-box}.form-input[_ngcontent-%COMP%]:focus{border-color:var(--color-border-focus);box-shadow:0 0 0 3px #067a451a}.form-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-input[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder)}.password-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-input-wrapper[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding-right:var(--space-12)}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:0;width:44px;height:44px;background:none;border:none;cursor:pointer;font-size:var(--text-xl);display:flex;align-items:center;justify-content:center;color:var(--text-secondary);transition:color var(--transition-fast);border-radius:0 var(--radius-md) var(--radius-md) 0}@media(hover:hover)and (pointer:fine){.password-toggle[_ngcontent-%COMP%]:hover{color:var(--text-primary)}}.password-toggle[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.checkbox-group[_ngcontent-%COMP%]{flex-direction:row;align-items:center;gap:var(--space-2)}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2);cursor:pointer;font-size:var(--text-sm);color:var(--text-primary);-webkit-user-select:none;user-select:none;min-height:44px}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;accent-color:var(--color-primary);flex-shrink:0}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.error-message[_ngcontent-%COMP%]{padding:var(--space-3) var(--space-4);background-color:#dc26261a;color:var(--color-error);border-radius:var(--radius-md);font-size:var(--text-sm);border-left:4px solid var(--color-error)}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:var(--space-3) var(--space-6);font-size:var(--text-base);font-weight:var(--font-semibold);font-family:var(--font-primary);color:var(--btn-primary-text);background-color:var(--btn-primary-bg);border:none;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-normal);display:flex;align-items:center;justify-content:center;gap:var(--space-2);min-height:48px}@media(hover:hover)and (pointer:fine){.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--btn-primary-hover);transform:translateY(-1px);box-shadow:var(--shadow-md)}}.submit-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;flex-shrink:0}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.auth-links[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:var(--space-2)}.link[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-secondary);text-decoration:none;transition:color var(--transition-fast);padding:var(--space-2) 0;display:inline-block}@media(hover:hover)and (pointer:fine){.link[_ngcontent-%COMP%]:hover{color:var(--color-primary);text-decoration:underline}}.auth-divider[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;margin:var(--space-6) 0 var(--space-4);color:var(--text-secondary);font-size:var(--text-sm)}.auth-divider[_ngcontent-%COMP%]:before, .auth-divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid var(--border-color)}.auth-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 var(--space-3)}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--space-2)}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-secondary);margin:0}.link-primary[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;font-weight:var(--font-semibold);transition:color var(--transition-fast);padding:var(--space-1) 0;display:inline-block}@media(hover:hover)and (pointer:fine){.link-primary[_ngcontent-%COMP%]:hover{color:var(--color-primary-hover);text-decoration:underline}}.verification-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;gap:var(--space-4);padding:var(--space-4) 0}.icon-wrapper[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:#067a451a;display:flex;align-items:center;justify-content:center;flex-shrink:0}.icon-wrapper.success[_ngcontent-%COMP%]{background-color:#067a4526}.mail-icon[_ngcontent-%COMP%], .check-icon[_ngcontent-%COMP%]{width:40px;height:40px;color:var(--color-primary);stroke:var(--color-primary)}.verification-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--text-2xl);font-weight:var(--font-bold);color:var(--text-primary);margin:0}.verification-text[_ngcontent-%COMP%]{font-size:var(--text-base);color:var(--text-secondary);margin:0;max-width:340px;line-height:1.6}.verification-steps[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-3);width:100%;text-align:left}.step[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--space-3)}.step-number[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:50%;background-color:var(--color-primary);color:#fff;font-size:var(--text-sm);font-weight:var(--font-bold);display:flex;align-items:center;justify-content:center;flex-shrink:0}.step[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-secondary);margin:0;padding-top:var(--space-1);line-height:1.5}.redirect-info[_ngcontent-%COMP%]{padding:var(--space-3) var(--space-4);background-color:#067a4514;border-radius:var(--radius-md);width:100%}.redirect-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--color-primary);margin:0;font-weight:var(--font-medium)}.form-hint[_ngcontent-%COMP%]{font-size:var(--text-xs);color:var(--text-secondary);margin-top:var(--space-1);margin-bottom:0}@media(max-width:768px){.auth-container[_ngcontent-%COMP%]{padding:var(--space-4) var(--space-3);align-items:flex-start;padding-top:var(--space-8)}.auth-card[_ngcontent-%COMP%]{padding:var(--space-8) var(--space-6)}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--text-2xl)}.auth-header[_ngcontent-%COMP%]{margin-bottom:var(--space-6)}}@media(max-width:480px){.auth-container[_ngcontent-%COMP%]{padding:var(--space-3) var(--space-3);padding-top:var(--space-6);align-items:flex-start}.auth-card[_ngcontent-%COMP%]{padding:var(--space-6) var(--space-4);border-radius:var(--radius-md)}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--text-xl)}.auth-subtitle[_ngcontent-%COMP%]{font-size:var(--text-sm)}.auth-form[_ngcontent-%COMP%]{gap:var(--space-4)}.auth-divider[_ngcontent-%COMP%]{margin:var(--space-4) 0 var(--space-3)}.verification-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--text-xl)}.icon-wrapper[_ngcontent-%COMP%]{width:64px;height:64px}.mail-icon[_ngcontent-%COMP%], .check-icon[_ngcontent-%COMP%]{width:32px;height:32px}}@media(max-width:375px){.auth-container[_ngcontent-%COMP%]{padding:var(--space-2) var(--space-2);padding-top:var(--space-4)}.auth-card[_ngcontent-%COMP%]{padding:var(--space-5) var(--space-3)}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--text-lg)}.auth-form[_ngcontent-%COMP%]{gap:var(--space-3)}.step-number[_ngcontent-%COMP%]{width:24px;height:24px;font-size:var(--text-xs)}}@media(prefers-reduced-motion:reduce){.spinner[_ngcontent-%COMP%]{animation:none;border-top-color:#fff;opacity:.7}.submit-btn[_ngcontent-%COMP%], .link[_ngcontent-%COMP%], .link-primary[_ngcontent-%COMP%], .password-toggle[_ngcontent-%COMP%]{transition:none}}']})};export{K as Login};
