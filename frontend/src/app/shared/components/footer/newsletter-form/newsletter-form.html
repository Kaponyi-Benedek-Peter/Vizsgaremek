<div class="newsletter">
  <div class="social-icons">
    @for (social of socialLinks; track social.name) {
      <div class="social-icon-wrapper">
        @if (social.url) {
          <a [href]="social.url" target="_blank" [attr.aria-label]="social.name">
            <img [src]="social.icon" [alt]="social.name" />
          </a>
        } @else {
          <button
            class="social-icon-btn"
            (click)="toggleSocialTooltip(social.name)"
            [attr.aria-label]="social.name"
          >
            <img [src]="social.icon" [alt]="social.name" />
          </button>
          @if (activeSocialTooltip === social.name) {
            <div class="social-tooltip">
              {{ 'footer.no_social_link' | translate }}
            </div>
          }
        }
      </div>
    }
  </div>

  <p>{{ 'footer.newsletter' | translate }}</p>

  <div class="newsletter-lang-selector">
    <button class="newsletter-lang-btn" ...>
      <img [src]="currentLangOption.flag" [alt]="currentLangOption.name" class="newsletter-flag" />
      <span class="newsletter-lang-name">{{ currentLangOption.name }}</span>
      <span class="newsletter-lang-arrow" [class.open]="isLangDropdownOpen">â–¾</span>
    </button>

    @if (isLangDropdownOpen) {
      <div class="newsletter-lang-dropdown">
        @for (lang of languages; track lang.code) {
          <button
            class="newsletter-lang-item"
            type="button"
            [class.active]="newsletterLang === lang.code"
            (click)="selectNewsletterLang(lang.code)"
          >
            <img [src]="lang.flag" [alt]="lang.name" class="newsletter-flag" />
            <span>{{ lang.name }}</span>
          </button>
        }
      </div>
    }
  </div>

  <form (ngSubmit)="onSubmit()">
    <input
      type="email"
      [placeholder]="'footer.emailPlaceholder' | translate"
      [(ngModel)]="email"
      name="email"
      required
    />
    <button type="submit" [disabled]="isSubmitting">
      {{ isSubmitting ? ('footer.sending' | translate) : ('footer.send' | translate) }}
    </button>
  </form>
</div>
